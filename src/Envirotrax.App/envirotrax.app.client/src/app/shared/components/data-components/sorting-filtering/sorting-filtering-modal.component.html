<div *ngIf="isViewReady">
    <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item" role="presentation">
            <a class="nav-link" role="tab" [class.active]="selectedTab == 'Sorting'" href="javascript:void(0)"
               (click)="selectTab('Sorting')">
                Sorting
            </a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link" role="tab" [class.active]="selectedTab == 'Filtering'" href="javascript:void(0)"
               (click)="selectTab('Filtering')">
                Filtering
            </a>
        </li>
    </ul>

    <form #queryForm="ngForm" (ngSubmit)="submitData()">
        <div class="tab-content">
            <div class="tab-pane p-3" role="tabpanel" [class.active]="selectedTab == 'Sorting'">

                <p>
                    Please click the Add Sorting button below to add sorting criteria.
                </p>
                <button type="button" class="btn btn-primary" (click)="addSortColumn()">
                    Add Sorting
                </button>

                <div class="mt-3 container-fluid">
                    <div *ngFor="let column of sortColumns; let i = index" class="row border p-1 mb-2 pt-3">
                        <div class="col-md-5 mb-3">
                            <vp-input id="sort-column-{{i}}" name="sortColumn{{i}}" type="select" label="Column"
                                      [required]="true" [(ngModel)]="column.field" [form]="queryForm">
                                <option *ngFor="let option of sortColumnOptions" [value]="option.id"
                                        [disabled]="option.disabled">
                                    {{option.value}}
                                <option>
                            </vp-input>
                        </div>

                        <div class="col-md-5 mb-3">
                            <vp-input id="sort-direction-{{i}}" name="sortDirection{{i}}" type="select"
                                      label="Direction" [required]="true" [(ngModel)]="column.value"
                                      [form]="queryForm">
                                <option *ngFor="let option of sortDirectionOptions" [value]="option.id">
                                    {{option.value}}
                                </option>
                            </vp-input>
                        </div>

                        <div class="col-md-2 mb-3 d-flex align-items-center justify-content-center">
                            <button type="button" class="btn btn-danger" title="Delete" aria-label="Delete"
                                    (click)="removeSortColumn(column)">
                                <i class="fa-solid fa-trash"></i>
                                <span class="d-md-none"> Delete</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane p-3" role="tabpanel" [class.active]="selectedTab == 'Filtering'">
                <p>
                    Please click the Add Filtering button below to add filtering criteria
                </p>

                <button type="button" class="btn btn-primary mb-3" (click)="addFilter()">
                    Add Filtering
                </button>

                <div *ngFor="let item of model.query.filter; let i  = index">
                    <vp-filter-input
                                     *ngIf="item.tag?.location != filterLocation.SearchBar && item.tag?.location != filterLocation.FilterPanel"
                                     [model]="item" [columns]="filterColumnOptions" [queryForm]="queryForm" [index]="i"
                                     (onDelete)="removeFilter(item)">
                    </vp-filter-input>
                </div>
            </div>
        </div>

        <div class="text-center">
            <vp-validation-summary [form]="queryForm"></vp-validation-summary>

            <div class="d-flex">
                <button type="submit" class="btn btn-primary w-100">
                    Submit
                </button>

                <button *ngIf="canReset" type="button" class="btn btn-primary ms-2 w-100" (click)="reset()">
                    Reset
                </button>

                <button type="button" class="btn btn-primary ms-2 w-100" (click)="cancel()">
                    Cancel
                </button>
            </div>
        </div>
    </form>
</div>